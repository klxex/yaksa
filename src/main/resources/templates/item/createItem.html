<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org">
<head>
    <title>약생성</title>
    <th:block th:insert="fragment/header"></th:block>
</head>
<body>
<th:block th:insert="fragment/bodyHeader"></th:block>
<div class="container-fluid p-5 text-center">
    <h1>약 입력</h1>
</div>
<div class="container" style="width:30%">
    <div class="mt-3">
        <div class="mb-3">
            <label for="name" class="form-label">Name:</label>
            <input type="text" class="form-control" id="name" >
        </div>
        <div class="mb-3">
            <label for="description" class="form-label">Description:</label>
            <input type="text" class="form-control" id="description" >
        </div>
        <div class="mb-3">
            <label for="count" class="form-label">Count:</label>
            <input type="text" class="form-control" id="count" >
        </div>
        <div class="mb-3">
            <label for="price" class="form-label">Price</label>
            <input type="text" class="form-control" id="price" >
        </div>
        <div>
            <input type="file" id="File" name="file" />
        </div>
        <button id="Button">전송</button>
    </div>
</div>
<script>
        const buttonElement=document.querySelector("#Button");
        let FileElement=document.querySelector("#File");
        const getData= async ()=>{
            try{
                url='http://ec2-15-164-160-161.ap-northeast-2.compute.amazonaws.com:8080/items';
                const formData = new FormData();
                formData.append("name",document.querySelector("#name").value);
                formData.append("description",document.querySelector("#description").value);
                formData.append("count",document.querySelector("#count").value);
                formData.append("price",document.querySelector("#price").value);
                formData.append("file",FileElement.files[0]);
                const response=await axios.post(url,formData);
                console.log(response);

            }
            catch(error){
                console.log(error);
            }
        };

        buttonElement.addEventListener('click',getData);

<!--    function send(){-->
<!--        $.ajax({-->
<!--        method:"post",-->
<!--        url:"http://localhost:8080/items",-->
<!--        contentType:"application/json; charset=utf-8",-->
<!--        data:JSON.stringify({-->
<!--            name:$("#name").val(),-->
<!--            description:$("#description").val(),-->
<!--            image: $("#image").val(),-->
<!--            count: $("#count").val(),-->
<!--            price: $("#price").val()-->
<!--        }),-->
<!--        success:function(res){-->
<!--           console.log($("#name").val());-->
<!--           console.log("성공");-->
<!--        },-->
<!--        error:function(res){-->
<!--           console.log("실패");-->
<!--        }-->
<!--    });-->

<!--    }-->
</script>

</body>



</html>